<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-EN">
<head>
	<script src="jquery-1.3.1.min.js" type="text/javascript"></script>
	<script src="menu-collapsed.js" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="style.css" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Chrome Explorer</title>

  <script type="text/javascript">

	  function showObj(obj)
	  {
	    window.app.debug("--------");
	    window.app.debug(" showObj: " + obj)
	    for(i in obj){
	     window.app.debug(i + ": " + obj[i]);
	    }
        window.app.debug("--------")
	  }
	
	  function updateViewList() {
		    //showObj(window.views.WebView);
		    window.app.debug("----------------updateViewList " + window.views);
		    var str = "";
		    var views = window.views.views;
		    var count = views.length;
		    for(var i = 0; i < count; i++) {
		      var viewStr = views[i].title;
		      var visible = views[i].visible;
		      window.app.debug(viewStr);
		      str +=
		          "<li>" +
		            "<table border='0'>" +
		              "<tr>" + 
		                "<td style='width:100%'><a>" + viewStr + "</a></td>" +
		                "<td style='width:100%'><a></a></td>" +
		                "<td><a>" + (visible ? "shown" : "hidden") + "</a></td>" +
		              "</tr>" +
		            "</table>" +
		          "</li>";
		    }
		    document.getElementById("viewList").innerHTML = str; 
	        window.app.debug("----------------updateViewList done" );
	  }
	   
	  function updateSnippetList() {
	      //showObj(window.views.WebView);
	      window.app.debug("----------------updateSnippetList " + window.chrome.snippets.length);
	      var count = window.chrome.snippets.length;
	      var str = "";
	      for(var i = 0; i < count; i++) {
	        var id = window.chrome.snippets[i].id;
	        var visible = window.chrome.snippets[i].visible;
            var anchor = window.chrome.snippets[i].anchor;
            window.app.debug(id);
	        str +=
	            "<li>" +
	              "<table border='0'>" +
	                "<tr>" + 
	                  "<td style='width:100%'><a>" + id + " <span class='anchor'>" + anchor + "</div></a></td>" +
	                  "<td style='width:100%'></td>" +
	                  "<td><a>" + (visible ? "shown" : "hidden") + "</a></td>" +
	                "</tr>" +
	              "</table>" +
	            "</li>";
	      }
       // document.getElementById("snippetList").innerHTML = str; 
	  } 
		  
      function updatePageList() {
          var superPages = window.views.WebView.superPages
          var count = superPages.length;
          window.app.debug("----------------updatePageList " + count);
          var str = "";
          for(var i = 0; i < count; i++) {
            var title = superPages[i].title;
	        window.app.debug("     " + title); 
            str += "<li><a>" + title + "</a></li>";
          }
          document.getElementById("pageList").innerHTML = str;
      } 		  

      function update() {
	    	  updateSnippetList();
	    	  updateViewList();
	    	  updatePageList();
      }
  </script>

</head>
<body onload="update()">
	<ul id="menu" style="width: 100">
        <li>
            <a href="#">Snippets</a>
            <ul id="snippetList">
                <li><a href="http://www.pivotx.net/">PivotX</a></li>
            </ul>
        </li>
        <li>
          <a href="#">Views</a>
          <ul id="viewList"></ul>
        </li>
        <li>
          <a href="#">Pages</a>
          <ul id="pageList"></ul>
        </li>
	</ul>
</body>
</html>
